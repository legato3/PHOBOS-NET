{% macro widget_card(id, title, icon, min_height='300px', extra_actions=None, show_spinner=False, card_class='',
card_class_bind=None, footer_content=None) %}
{%- set data_prop = id -%}
{%- if id == 'worldmap' -%}
    {%- set data_prop = 'worldMap' -%}
{%- elif id == 'insights' -%}
    {%- set data_prop = 'insights' -%}
{%- endif -%}
<div class="card {{ card_class }}" {% if card_class_bind %}:class="{{ card_class_bind }}" {% endif %}>
    <h2>
        <div class="card-title-content">
            <span class="title-icon">{{ icon }}</span>
            <span>{{ title }}</span>
        </div>
        <div class="card-actions">
            {% if extra_actions %}
            {{ extra_actions | safe }}
            {% endif %}

            {% if show_spinner %}
            <div class="spinner" x-show="{{ data_prop }}?.loading"></div>
            {% endif %}
        </div>
    </h2>
    <div class="widget-body" style="min-height: {{ min_height }}">
        <!-- Skeleton Loader -->
        <div class="skeleton-container" x-show="{{ data_prop }}?.loading">
            <div class="skeleton-line title w-50"></div>
            <div class="skeleton-chart"></div>
        </div>

        <!-- Real Content -->
        <div x-show="!{{ data_prop }}?.loading" style="display: none;" :style="!{{ data_prop }}?.loading ? 'display: block' : ''">
            {{ caller() }}
        </div>
    </div>
    {% if footer_content %}
    <div class="card-footer">
        {{ footer_content | safe }}
    </div>
    {% endif %}
</div>
{% endmacro %}